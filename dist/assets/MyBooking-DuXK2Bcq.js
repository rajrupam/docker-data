import{j as r,r as l,A as n,S as d,f as h,h as p,s as u}from"./index-ChrwmaKA.js";import{A as x}from"./AxiosToastError-CEahqkfS.js";import{N as f}from"./NoData-OS1XLSRu.js";const g=({booking:e,onRelease:o})=>{var a;return r.jsxs("div",{className:"max-w-sm rounded overflow-hidden shadow-lg p-4 bg-white",children:[r.jsxs("div",{className:"px-6 py-4",children:[r.jsxs("div",{className:"font-bold text-xl mb-2",children:["Slot Number: ",e.slotNumber]}),r.jsxs("p",{className:"text-gray-700 text-base",children:["Date: ",e.date]}),r.jsxs("p",{className:"text-gray-700 text-base",children:["Booked By: ",(a=e==null?void 0:e.bookedBy)==null?void 0:a.name]})]}),r.jsx("div",{className:"px-6 pt-4 pb-2",children:r.jsx("button",{onClick:()=>o(e._id),className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded cursor-pointer",children:"Release Slot"})})]})},B=()=>{const[e,o]=l.useState([]),[a,c]=l.useState(!0);l.useEffect(()=>{i()},[]);const i=async()=>{try{const{data:s}=await n({...d.getBooking});console.log(s.data),s!=null&&s.error&&o([]),s!=null&&s.success&&(o(s==null?void 0:s.data),console.log(s==null?void 0:s.data))}catch(s){x(s),o([])}finally{c(!1)}},m=async s=>{try{const{data:t}=await n.delete(`${p}${d.releaseBooking.url}/${s}`);t!=null&&t.error&&u("Failed to release parking slot","error"),t!=null&&t.success&&(i(),c(!0))}catch(t){x(t)}};return a?r.jsx(h,{}):(console.log(e),r.jsxs("div",{className:"container mx-auto p-2",children:[r.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Booking History"}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:(e==null?void 0:e.length)!==0?e==null?void 0:e.map(s=>r.jsx(g,{booking:s,onRelease:m},s._id)):r.jsx(f,{})})]}))};export{B as default};
