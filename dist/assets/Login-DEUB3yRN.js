import{u as p,a as h,b as g,r as f,s as u,j as e,L as j,F as b}from"./index-ChrwmaKA.js";import{c as w,a as o,F as N,b as v,d as i,E as d}from"./index.esm-DQzHrBvS.js";const F=()=>{const r=p(),n=h(),s=g(a=>{var l;return(l=a==null?void 0:a.user)==null?void 0:l.data});console.log(s,"us"),f.useEffect(()=>{var a,l,t;s!=null&&s.error?u("Login Failed","error"):s!=null&&s.data&&(localStorage.setItem("accesstoken",(a=s==null?void 0:s.data)==null?void 0:a.accesstoken),localStorage.setItem("refreshtoken",(l=s==null?void 0:s.data)==null?void 0:l.refreshtoken),((t=s==null?void 0:s.data)==null?void 0:t.role)==="admin"?r("/admin"):r("/slots"))},[s,r]);const m={email:"",password:""},c=w({email:o().email("Invalid email format").required("Required"),password:o().required("Required")}),x=(a,{setSubmitting:l})=>{n({type:b,payload:a}),l(!1)};return e.jsx("div",{className:"flex items-center justify-center  ",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-4",children:"Login"}),e.jsx(N,{initialValues:m,validationSchema:c,onSubmit:x,children:({isSubmitting:a})=>e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:["Email",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(i,{id:"email",type:"email",name:"email",className:"w-full p-2 border rounded-lg mt-1",placeholder:"Enter email"}),e.jsx(d,{name:"email",component:"div",className:"text-red-500 text-sm mt-1"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:["Password",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(i,{id:"password",type:"password",name:"password",className:"w-full p-2 border rounded-lg mt-1",placeholder:"Enter password"}),e.jsx(d,{name:"password",component:"div",className:"text-red-500 text-sm mt-1"})]}),e.jsx("button",{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-600 text-white py-2 rounded-lg font-semibold",disabled:a,children:a?"Logging in...":"Login"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["If not registered, ",e.jsx(j,{to:"/register",className:"text-blue-500",children:"Register Here"})]})]})})]})})};export{F as default};
