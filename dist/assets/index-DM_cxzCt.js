import{j as e,h as x,r as i,u as h,A as p,S as b,s as m}from"./index-ChrwmaKA.js";import{A as j}from"./AxiosToastError-CEahqkfS.js";import{N as f}from"./NoData-OS1XLSRu.js";const y=({bookings:t,onRelease:l})=>(console.log(t),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Name"}),e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Slot Number"}),e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Booked By"}),e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Date"}),e.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Action"})]})}),e.jsx("tbody",{children:t.map(({_id:o,slotNumber:n,date:s,bookedBy:{name:c,email:a}})=>e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 px-4 border-b text-left",children:c}),e.jsx("td",{className:"py-2 px-4 border-b text-left",children:n}),e.jsx("td",{className:"py-2 px-4 border-b text-left",children:a}),e.jsx("td",{className:"py-2 px-4 border-b text-left",children:s}),e.jsx("td",{className:"py-2 px-4 border-b text-left",children:e.jsx("button",{onClick:()=>l(o),className:"bg-red-500 text-white py-1 px-3 rounded",children:"Release"})})]},o))})]})})),u=async(t,l,o)=>{const n=`${x}/${l}`;try{const s=await fetch(n,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!s.ok)throw new Error(`Response status: ${s.status}`);return await s.json()}catch(s){s instanceof Error?console.error(s.message):console.error("unKnown error occured")}},N=({type:t,onClick:l,children:o,className:n="",...s})=>e.jsx("button",{type:t,onClick:l,className:`bg-blue-500 text-white py-2 px-4 rounded ${n}`,...s,children:o}),k=()=>{const[t,l]=i.useState([]),o=h(),n=()=>{o("/admin-slots")},s=async()=>{try{const a=await u("GET","/getAllBookings");console.log(a.data.data,"respy"),l(a.data)}catch{}};i.useEffect(()=>{s()},[]);const c=async a=>{var d;try{const{data:r}=await p.delete(`${x}${b.releaseBooking.url}/${a}`);console.log(`Release slot with id: ${a}`),console.log((d=r.data)==null?void 0:d.data),r!=null&&r.error&&m("Failed to release parking slot","error"),r!=null&&r.success&&s()}catch(r){j(r)}};return e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Admin Dashboard"}),e.jsx(N,{onClick:n,children:"Add Slot"}),t.length>0?e.jsx(y,{bookings:t,onRelease:c}):e.jsx("div",{className:"text-center text-gray-500",children:e.jsx(f,{})})]})};export{k as default};
